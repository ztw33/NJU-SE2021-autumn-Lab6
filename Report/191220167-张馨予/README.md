# 实验6 实验报告

191220167 张馨予

## 一、git 基本操作

以新建的lab6文件夹为例，演示git的基本操作。

首先使用`git init`命令，初始化本地仓库。

![](ref/1.png)

最初的lab6文件夹为空。在其中创建一个`test.txt`文件，其中内容如下：

<img src="ref/2.png" style="zoom:67%;" />

接下来执行`git log`指令。由于此时没有执行任何commit操作，因此提示当前分支还没有任何提交。

![](ref/3.png)

接着执行`git status`指令。可以看到git bash提示说在当前分支下还没有任何提交，但是有一个untracked file test.txt。这是由于test.txt文件是在仓库初始化后才被创建的，而且当前并未被添加到暂存区，因此不能被追踪到。

![](ref/4.png)

下面执行`git add -A`操作，将修改的文件添加到暂存区。-A参数表示提交所有变化。

![](ref/5.png)

再次执行`git status`指令，可以看到待提交的变化下多了一条：

![](ref/6.png)

执行`git commit -m "<一些说明>"`指令，将当前暂存区的文件实际保存到仓库的历史记录中。在上传到远程仓库后，修改的文件后面会显示双引号中的说明。

![](ref/7.png)

再次执行`git log`，`git status`操作，结果如下。可以看到提交日志中多了一条记录，内容为刚刚执行的commit操作中的说明部分；status中显示当前没有待添加到暂存区或者待提交的任务。

![](ref/8.png)

现在修改test.txt文件中的内容，删去一个感叹号，并保存文件，执行git diff指令，结果如下。可以看到该指令可以显示出当前未保存到暂存区的变化。

![](ref/9.png)

将该变化保存到暂存区并提交后，当前提交日志如下：

![](ref/10.png)

接下来执行`git reset --hard HEAD^`指令，将当前仓库中内容回退到上一个版本。查看test.txt。可以看到被删除的感叹号回来了。查看提交日志，删除感叹号的提交记录不在了。

![](ref/11.png)

假设我后悔回退到当前版本，则可以使用`git reflog`命令查看我的每个命令的`commit id`，再使用`git reset --hard commit_id`命令，回到回退前的版本。

![](ref/12.png)



## 二、实验三中的git操作

在实验三中，用`git branch <分支名>`创建分支，用`git checkout <分支名>`切换分支，用`git branch`查看分支。由于实验三中有三处修改，因此创建了三个分支。

![](ref/13.png)

在实验过程中，每完成一个分支就使用`git merge`操作将该分支合并到master分支上。最后的分支合并图如下：

![](ref/14.png)

在合并后，用`git tag <标签内容>`指令为master分支打上了标签"Final_Version"，在上方日志中可以看到。

## 三、回答问题

##### 1.使用git的好处？

答：本地拥有版本库，可以随时进行版本后退，且支持离线工作；建立分支非常简单，且可以在分支之间任意切换；速度快、灵活；可以指定和多个不同的远程仓库进行交互；任意两个开发者之间可以很容易的解决冲突。

##### 2.使用远程仓库的好处？

答：单个开发者可以实时将自己的修改更新在远程仓库中，有利于开发者之间的资源共享；记录每个版本的更新信息，可以更有效的存储文件更改，更好地确保文件完整性。

##### 3.在开发中使用分支的好处?

答：使版本迭代更加清晰；每个开发者可以在独立分支上同时进行开发，减少冲突，提升开发效率；各个分支在开发过程中，如果一个分支开发失败，不会对其他分支有任何影响。

##### 4. merge 和 rebase的区别

答：git merge 和 git rebase 都被用来合并不同分支之下的代码。但merge一般发生在主分支上，会保留所有commit的历史时间，使得不同分支的commit在合并后交杂在一起，即merge会形成以时间为基准的网状历史结构。

rebase通常发生在每个人自己的分支上，会始终把最新的修改放到最前。rebase的基础就是现有的分支，可以确保每个人的代码都运行在当前最新的主分支的代码上。

##### 5.reset 和 revert的区别

答：git revert是通过一次逆向的commit来“中和”之前的提交，会使git的HEAD指针继续前进，只是新的commit的内容和要revert的内容相反，因此日后合并分支时，会导致这部分改变不会再次出现。

git reset则是将撤销点后的操作都会回退到暂存区中，会使git的HEAD指针向后移动，因此当日后合并分支时，被回退的commit可能还会被引入。